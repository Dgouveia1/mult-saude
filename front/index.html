<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>MedCenter - Sistema Médico</title>
    
    <!-- Fontes -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Estilos -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- ============================================================
      ESTRUTURA PRINCIPAL
    ============================================================= -->
    <!-- Botão de Menu Mobile -->
    <button class="mobile-menu-btn" id="mobileMenuBtn">
        <i class="fas fa-bars"></i>
    </button>
    
    <!-- Overlay para Sidebar em Mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    
    <div class="container">
        <!-- Sidebar de Navegação -->
        <div class="sidebar" id="sidebar">
            <div class="logo-container">
                <img src="https://i.ibb.co/MyPPcBhc/download-1.jpg" alt="MedCenter Logo" class="logo-img">
                <div class="logo-text">MultSaude</div>
                <div class="logo-subtitle">Clínica Bim</div>
            </div>
            
            <!-- Itens do Menu -->
            <div class="menu-item active" data-page="dashboard">
                <i class="fas fa-tachometer-alt"></i> Painel Gerencial
            </div>
            <div class="menu-item" data-page="agenda">
                <i class="fas fa-calendar-alt"></i> Agenda
            </div>
            <div class="menu-item" data-page="clients">
                <i class="fas fa-user-injured"></i> Pacientes
            </div>
            <div class="menu-item" data-page="doctors">
                <i class="fas fa-user-md"></i> Médicos
            </div>
        </div>

        <!-- Conteúdo Principal -->
        <div class="main-content">
            <!-- ==================== SEÇÃO: DASHBOARD ==================== -->
            <div class="page-section active" id="dashboard">
                <div class="header">
                    <div class="header-left">
                        <h1 class="page-title">Painel Gerencial</h1>
                        <p class="page-subtitle">Visão geral da clínica</p>
                    </div>
                </div>

                <!-- Cards de Métricas -->
                <div class="dashboard-grid">
                    <div class="card metric-card">
                        <div class="card-title"><i class="fas fa-calendar-day"></i> Consultas Hoje</div>
                        <div class="metric-value" id="todayAppointments">18</div>
                        <div class="metric-label">consultas</div>
                        <div class="metric-change positive">+12% vs ontem</div>
                    </div>
                    
                    <div class="card metric-card">
                        <div class="card-title"><i class="fas fa-calendar-week"></i> Consultas da Semana</div>
                        <div class="metric-value" id="weekAppointments">120</div>
                        <div class="metric-label">esta semana</div>
                        <div class="metric-change positive">+5% vs semana anterior</div>
                    </div>
                    
                    <div class="card metric-card">
                        <div class="card-title"><i class="fas fa-chart-line"></i> Taxa de Ocupação</div>
                        <div class="metric-value" id="occupancyRate">85%</div>
                        <div class="metric-label">dos horários</div>
                        <div class="metric-change positive">+7% vs semana anterior</div>
                    </div>
                    
                    <div class="card metric-card">
                        <div class="card-title"><i class="fas fa-user-plus"></i> Novos Pacientes</div>
                        <div class="metric-value" id="newPatients">12</div>
                        <div class="metric-label">este mês</div>
                        <div class="metric-change positive">+20% vs mês anterior</div>
                    </div>
                </div>

                <!-- Gráficos -->
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-title"><i class="fas fa-stethoscope"></i> Consultas por Especialidade</div>
                        <div class="chart-container chart-small">
                            <canvas id="servicesChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title"><i class="fas fa-money-bill-wave"></i> Faturamento Semanal</div>
                        <div class="chart-container chart-small">
                            <canvas id="revenueChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Estatísticas Médicas -->
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-title"><i class="fas fa-heartbeat"></i> Distribuição por Convênio</div>
                        <div class="chart-container">
                            <canvas id="insuranceChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title"><i class="fas fa-clinic-medical"></i> Comparativo de Consultórios</div>
                        <div class="chart-container">
                            <canvas id="officeComparisonChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== SEÇÃO: AGENDA ==================== -->
            <div class="page-section" id="agenda">
                <div class="header">
                    <div class="header-left">
                        <h1 class="page-title">Agenda</h1>
                        <p class="page-subtitle">Gerencie suas consultas</p>
                    </div>
                </div>

                <!-- Navegação por Data -->
                <div class="date-navigation">
                    <button class="date-nav-btn" id="prevDay">
                        <i class="fas fa-chevron-left"></i> Anterior
                    </button>
                    <div class="current-date-display" id="currentDateDisplay"></div>
                    <button class="date-nav-btn" id="nextDay">
                        Próximo <i class="fas fa-chevron-right"></i>
                    </button>
                </div>

                <!-- Resumo por Especialidade -->
                <div class="services" id="specialtiesSummary">
                    <!-- Dinâmico via JavaScript -->
                </div>

                <!-- Grade de Horários -->
                <div class="schedule-container">
                    <div class="schedule-header">
                        <div class="schedule-title">Agenda do Dia</div>
                        <div class="header-actions">
                            <select id="doctorFilter" class="btn btn-secondary">
                                <option value="all">Todos os Médicos</option>
                                <!-- Preenchido via JavaScript -->
                            </select>
                            <button class="btn btn-primary" id="addAppointmentBtn">
                                <i class="fas fa-plus"></i> Nova Consulta
                            </button>
                        </div>
                    </div>
                    
                    <div class="schedule-grid-container">
                        <div class="time-column" id="timeColumn">
                            <div class="service-column-header">Horário</div>
                            <!-- Preenchido via JavaScript -->
                        </div>
                        <div class="schedule-grid" id="scheduleGrid">
                            <!-- Preenchido via JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== SEÇÃO: PACIENTES ==================== -->
            <div class="page-section" id="clients">
                <div class="header">
                    <div class="header-left">
                        <h1 class="page-title">Pacientes</h1>
                        <p class="page-subtitle">Gerencie seus pacientes</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-primary" id="addClientBtn">
                            <i class="fas fa-plus"></i> Novo Paciente
                        </button>
                    </div>
                </div>

                <!-- Controles de Busca -->
                <div class="clients-controls">
                    <div class="search-container">
                        <input type="text" class="search-input" id="clientSearch" 
                               placeholder="Buscar por nome ou telefone...">
                    </div>
                    <div class="filters-container" id="tagsFilterContainer">
                        <!-- Preenchido via JavaScript -->
                    </div>
                </div>

                <!-- Tabela de Pacientes -->
                <div class="clients-table-container">
                    <table class="clients-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Telefone</th>
                                <th>Cidade</th>
                                <th>Convênio</th>
                                <th>Idade</th>
                                <th>Paciente há</th>
                                <th>Tags</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="clientsTableBody">
                            <!-- Preenchido via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ==================== SEÇÃO: MÉDICOS ==================== -->
            <div class="page-section" id="doctors">
                <div class="header">
                    <div class="header-left">
                        <h1 class="page-title">Médicos</h1>
                        <p class="page-subtitle">Gerencie os profissionais</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-primary" id="addDoctorBtn">
                            <i class="fas fa-plus"></i> Novo Médico
                        </button>
                    </div>
                </div>

                <!-- Cards de Médicos -->
                <div class="dashboard-grid" id="doctorsGrid">
                    <!-- Preenchido via JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================================
      MODAIS
    ============================================================= -->
    <!-- Modal: Consultas -->
    <div class="modal" id="appointmentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Nova Consulta</h3>
                <span class="close-btn" id="closeAppointmentModal">&times;</span>
            </div>
            <form id="appointmentForm">
                <input type="hidden" id="appointmentId">
                <div class="form-group">
                    <label for="clientName">Nome do Paciente:</label>
                    <input type="text" id="clientName" required>
                </div>
                <div class="form-group">
                    <label for="clientPhone">Telefone:</label>
                    <input type="tel" id="clientPhone" placeholder="(11) 99999-9999">
                </div>
                <div class="form-group">
                    <label for="serviceType">Especialidade:</label>
                    <select id="serviceType" required>
                        <option value="cardiologia">Cardiologia</option>
                        <option value="dermatologia">Dermatologia</option>
                        <option value="pediatria">Pediatria</option>
                        <option value="ortopedia">Ortopedia</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="doctor">Médico:</label>
                    <select id="doctor" required>
                        <!-- Preenchido via JavaScript -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="appointmentTime">Horário:</label>
                    <select id="appointmentTime" required>
                        <!-- Preenchido via JavaScript -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="insurance">Convênio:</label>
                    <select id="insurance">
                        <option value="particular">Particular</option>
                        <option value="unimed">Unimed</option>
                        <option value="amil">Amil</option>
                        <option value="sulamerica">SulAmérica</option>
                        <option value="bradesco">Bradesco Saúde</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="status">Status:</label>
                    <select id="status" required>
                        <option value="confirmado">Confirmado</option>
                        <option value="pendente">Pendente</option>
                        <option value="cancelado">Cancelado</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="observations">Observações:</label>
                    <textarea id="observations" placeholder="Observações sobre a consulta..."></textarea>
                </div>
                
                <div class="appointment-actions" id="appointmentActions" style="display: none;">
                    <button type="button" class="btn btn-success" id="confirmBtn">Confirmar</button>
                    <button type="button" class="btn btn-warning" id="cancelBtn">Cancelar</button>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" id="deleteAppointmentBtn" style="display: none;">Excluir</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal: Pacientes -->
    <div class="modal" id="clientModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="clientModalTitle">Novo Paciente</h3>
                <span class="close-btn" id="closeClientModal">&times;</span>
            </div>
            <form id="clientForm">
                <input type="hidden" id="clientId">
                <div class="form-group">
                    <label for="clientFullName">Nome Completo:</label>
                    <input type="text" id="clientFullName" required>
                </div>
                <div class="form-group">
                    <label for="clientPhoneNumber">Telefone:</label>
                    <input type="tel" id="clientPhoneNumber" placeholder="(11) 99999-9999" required>
                </div>
                <div class="form-group">
                    <label for="clientEmail">E-mail:</label>
                    <input type="email" id="clientEmail" placeholder="paciente@email.com">
                </div>
                <div class="form-group">
                    <label for="clientCity">Cidade:</label>
                    <input type="text" id="clientCity" required>
                </div>
                <div class="form-group">
                    <label for="clientBirthDate">Data de Nascimento:</label>
                    <input type="date" id="clientBirthDate">
                </div>
                <div class="form-group">
                    <label for="clientFirstExperience">Primeira Consulta:</label>
                    <input type="date" id="clientFirstExperience">
                </div>
                <div class="form-group">
                    <label for="clientInsurance">Convênio:</label>
                    <select id="clientInsurance">
                        <option value="particular">Particular</option>
                        <option value="unimed">Unimed</option>
                        <option value="amil">Amil</option>
                        <option value="sulamerica">SulAmérica</option>
                        <option value="bradesco">Bradesco Saúde</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Tags:</label>
                    <div class="tags-input" id="tagsInput">
                        <input type="text" class="tag-input" id="tagInput" placeholder="Digite uma tag e pressione Enter">
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" id="deleteClientBtn" style="display: none;">Excluir</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal: Detalhes do Paciente -->
    <div class="modal client-details-modal" id="clientDetailsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Detalhes do Paciente</h3>
                <span class="close-btn" id="closeClientDetailsModal">&times;</span>
            </div>
            
            <div class="client-details-header">
                <div class="client-avatar" id="clientAvatar"></div>
                <div class="client-details-info">
                    <h3 id="clientDetailsName">-</h3>
                    <p id="clientDetailsPhone">📞 -</p>
                    <p id="clientDetailsCity">📍 -</p>
                    <p id="clientDetailsInsurance">🏥 -</p>
                </div>
            </div>

            <div class="client-details-grid">
                <div class="detail-item">
                    <div class="detail-label">E-mail</div>
                    <div class="detail-value" id="clientDetailsEmail">-</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Idade</div>
                    <div class="detail-value" id="clientDetailsAge">-</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Paciente há</div>
                    <div class="detail-value" id="clientDetailsExperience">-</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Data de Nascimento</div>
                    <div class="detail-value" id="clientDetailsBirthDate">-</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Primeira Consulta</div>
                    <div class="detail-value" id="clientDetailsFirstExperience">-</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Histórico Médico</div>
                    <div class="client-tags-detail" id="clientDetailsTags">
                        <!-- Preenchido via JavaScript -->
                    </div>
                </div>
            </div>

            <div class="appointments-history">
                <div class="history-title">Últimas Consultas</div>
                <div id="appointmentsHistoryContainer">
                    <!-- Preenchido via JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Médicos -->
    <div class="modal" id="doctorModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="doctorModalTitle">Novo Médico</h3>
                <span class="close-btn" id="closeDoctorModal">&times;</span>
            </div>
            <form id="doctorForm">
                <input type="hidden" id="doctorId">
                <div class="form-group">
                    <label for="doctorName">Nome Completo:</label>
                    <input type="text" id="doctorName" required>
                </div>
                <div class="form-group">
                    <label for="doctorSpecialty">Especialidade:</label>
                    <select id="doctorSpecialty" required>
                        <option value="cardiologia">Cardiologia</option>
                        <option value="dermatologia">Dermatologia</option>
                        <option value="pediatria">Pediatria</option>
                        <option value="ortopedia">Ortopedia</option>
                        <option value="clinico">Clínico Geral</option>
                        <option value="ginecologia">Ginecologia</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="doctorCRM">CRM:</label>
                    <input type="text" id="doctorCRM" placeholder="SP-123456" required>
                </div>
                <div class="form-group">
                    <label for="doctorPhone">Telefone:</label>
                    <input type="tel" id="doctorPhone" placeholder="(11) 99999-9999">
                </div>
                <div class="form-group">
                    <label for="doctorEmail">E-mail:</label>
                    <input type="email" id="doctorEmail" placeholder="medico@clinica.com">
                </div>
                <div class="form-group">
                    <label for="doctorOffice">Consultório:</label>
                    <select id="doctorOffice" required>
                        <option value="consultorio1">Consultório 1</option>
                        <option value="consultorio2">Consultório 2</option>
                        <option value="consultorio3">Consultório 3</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="doctorSchedule">Horário de Atendimento:</label>
                    <textarea id="doctorSchedule" placeholder="Ex: Segunda a Sexta, 08:00 às 18:00"></textarea>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" id="deleteDoctorBtn" style="display: none;">Excluir</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ============================================================
      SCRIPTS
    ============================================================= -->
    <script>
        // ============================================================
        //  FUNÇÕES GLOBAIS E INICIALIZAÇÃO
        // ============================================================
        
        // Objetos globais para armazenamento de dados
        const state = {
            currentDate: new Date(),
            appointments: [],
            patients: [],
            doctors: [],
            filteredPatients: [],
            currentTagFilter: 'all',
            currentTags: []
        };

        // Elementos DOM frequentemente acessados
        const DOM = {
            sidebar: document.getElementById('sidebar'),
            mobileMenuBtn: document.getElementById('mobileMenuBtn'),
            sidebarOverlay: document.getElementById('sidebarOverlay'),
            currentDateDisplay: document.getElementById('currentDateDisplay'),
            scheduleGrid: document.getElementById('scheduleGrid'),
            specialtiesSummary: document.getElementById('specialtiesSummary'),
            clientsTableBody: document.getElementById('clientsTableBody'),
            doctorsGrid: document.getElementById('doctorsGrid'),
            tagsFilterContainer: document.getElementById('tagsFilterContainer'),
            clientSearch: document.getElementById('clientSearch')
        };

        // Inicialização do sistema
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Sistema MedCenter iniciado');
            
            // Configurar eventos de navegação
            setupNavigation();
            
            // Inicializar componentes
            initDashboard();
            initAgenda();
            initPatients();
            initDoctors();
            
            // Carregar dados iniciais
            loadInitialData();
        });

        // ============================================================
        //  FUNÇÕES DE NAVEGAÇÃO E UI
        // ============================================================

        function setupNavigation() {
            // Alternar entre páginas
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', function() {
                    // Remover classe ativa de todos os itens
                    document.querySelectorAll('.menu-item').forEach(i => 
                        i.classList.remove('active'));
                    
                    // Adicionar classe ativa ao item clicado
                    this.classList.add('active');
                    
                    // Esconder todas as seções
                    document.querySelectorAll('.page-section').forEach(section => 
                        section.classList.remove('active'));
                    
                    // Mostrar a seção correspondente
                    const pageId = this.getAttribute('data-page');
                    document.getElementById(pageId).classList.add('active');
                    
                    // Fechar sidebar em dispositivos móveis
                    if (window.innerWidth <= 992) {
                        closeSidebar();
                    }
                });
            });
            
            // Botão de menu mobile
            DOM.mobileMenuBtn.addEventListener('click', toggleSidebar);
            
            // Overlay para fechar sidebar
            DOM.sidebarOverlay.addEventListener('click', closeSidebar);
        }

        function toggleSidebar() {
            DOM.sidebar.classList.toggle('sidebar-active');
            DOM.sidebarOverlay.style.display = 
                DOM.sidebar.classList.contains('sidebar-active') ? 'block' : 'none';
        }

        function closeSidebar() {
            DOM.sidebar.classList.remove('sidebar-active');
            DOM.sidebarOverlay.style.display = 'none';
        }

        // ============================================================
        //  FUNÇÕES DO DASHBOARD
        // ============================================================
        
        function initDashboard() {
            console.log('Dashboard inicializado');
            // Inicializar gráficos
            initCharts();
        }

        function initCharts() {
            // Gráfico de serviços
            new Chart(document.getElementById('servicesChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Cardiologia', 'Dermatologia', 'Pediatria', 'Ortopedia'],
                    datasets: [{
                        data: [35, 25, 20, 20],
                        backgroundColor: [
                            '#FF8C00',
                            '#4682B4',
                            '#87CEEB',
                            '#1E4D6B'
                        ]
                    }]
                }
            });
            
            // Outros gráficos seriam inicializados aqui...
        }

        // ============================================================
        //  FUNÇÕES DA AGENDA
        // ============================================================
        
        function initAgenda() {
            console.log('Agenda inicializada');
            
            // Atualizar exibição da data
            updateDateDisplay();
            
            // Configurar navegação por data
            document.getElementById('prevDay').addEventListener('click', () => {
                state.currentDate.setDate(state.currentDate.getDate() - 1);
                refreshSchedule();
            });
            
            document.getElementById('nextDay').addEventListener('click', () => {
                state.currentDate.setDate(state.currentDate.getDate() + 1);
                refreshSchedule();
            });
            
            // Botão para nova consulta
            document.getElementById('addAppointmentBtn').addEventListener('click', () => {
                openAppointmentModal();
            });
            
            // Inicializar grade de horários
            createScheduleGrid();
        }

        function updateDateDisplay() {
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            DOM.currentDateDisplay.textContent = 
                state.currentDate.toLocaleDateString('pt-BR', options);
        }

        function createScheduleGrid() {
            // Implementação da criação da grade de horários
            // (seria preenchida com dados reais em uma implementação completa)
        }

        function refreshSchedule() {
            updateDateDisplay();
            // Aqui você faria uma chamada para o backend para buscar as consultas
            console.log('Atualizando agenda para:', state.currentDate);
        }

        function openAppointmentModal(appointmentId = null) {
            // Lógica para abrir o modal de consultas
            document.getElementById('appointmentModal').style.display = 'flex';
        }

        // ============================================================
        //  FUNÇÕES DE PACIENTES
        // ============================================================
        
        function initPatients() {
            console.log('Módulo de pacientes inicializado');
            
            // Botão para novo paciente
            document.getElementById('addClientBtn').addEventListener('click', () => {
                openPatientModal();
            });
            
            // Configurar busca
            DOM.clientSearch.addEventListener('input', filterPatients);
        }

        function filterPatients() {
            const searchTerm = DOM.clientSearch.value.toLowerCase();
            // Lógica para filtrar pacientes
            console.log('Filtrando pacientes por:', searchTerm);
        }

        function openPatientModal(patientId = null) {
            // Lógica para abrir o modal de pacientes
            document.getElementById('clientModal').style.display = 'flex';
        }

        // ============================================================
        //  FUNÇÕES DE MÉDICOS
        // ============================================================
        
        function initDoctors() {
            console.log('Módulo de médicos inicializado');
            
            // Botão para novo médico
            document.getElementById('addDoctorBtn').addEventListener('click', () => {
                openDoctorModal();
            });
        }

        function openDoctorModal(doctorId = null) {
            // Lógica para abrir o modal de médicos
            document.getElementById('doctorModal').style.display = 'flex';
        }

        // ============================================================
        //  FUNÇÕES DE CARREGAMENTO DE DADOS
        // ============================================================
        
        function loadInitialData() {
            // Simulação de carregamento de dados
            setTimeout(() => {
                console.log('Dados iniciais carregados');
                
                // Atualizar interface
                refreshSchedule();
                
                // Simular dados de pacientes
                state.patients = [
                    {
                        id: 1,
                        name: "Maria Silva",
                        phone: "(11) 99999-1111",
                        email: "maria.silva@email.com",
                        city: "São Paulo",
                        birthDate: "1990-05-15",
                        firstExperience: "2024-01-15",
                        insurance: "unimed",
                        tags: ["hipertensão", "check-up anual"]
                    },
                    // ... outros pacientes
                ];
                
                // Atualizar lista de pacientes
                renderPatientsTable();
            }, 1000);
        }

        function renderPatientsTable() {
            // Lógica para renderizar a tabela de pacientes
            let html = '';
            
            state.patients.forEach(patient => {
                html += `
                <tr>
                    <td class="client-name-cell">${patient.name}</td>
                    <td>${patient.phone}</td>
                    <td>${patient.city}</td>
                    <td>${patient.insurance || 'Particular'}</td>
                    <td>${calculateAge(patient.birthDate)} anos</td>
                    <td>${calculateExperienceTime(patient.firstExperience)}</td>
                    <td class="client-tags-cell">
                        ${patient.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </td>
                    <td class="client-actions-cell">
                        <button class="btn btn-primary btn-small" 
                                onclick="showPatientDetails(${patient.id})">
                            Detalhes
                        </button>
                        <button class="btn btn-secondary btn-small" 
                                onclick="editPatient(${patient.id})">
                            Editar
                        </button>
                    </td>
                </tr>
                `;
            });
            
            DOM.clientsTableBody.innerHTML = html;
        }

        function calculateAge(birthDate) {
            // Lógica para calcular idade
            return 35; // Exemplo
        }

        function calculateExperienceTime(firstExperience) {
            // Lógica para calcular tempo como paciente
            return "1 ano"; // Exemplo
        }

        // ============================================================
        //  FUNÇÕES GLOBAIS ACESSÍVEIS DO HTML
        // ============================================================
        
        window.showPatientDetails = function(patientId) {
            // Lógica para mostrar detalhes do paciente
            document.getElementById('clientDetailsModal').style.display = 'flex';
        }

        window.editPatient = function(patientId) {
            // Lógica para editar paciente
            openPatientModal(patientId);
        }

        // Fechar modais
        document.querySelectorAll('.close-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                this.closest('.modal').style.display = 'none';
            });
        });

        // Fechar modais ao clicar fora
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
            }
        });
    </script>
</body>
</html>
